Title: How to find good heatsink for a MOSFET
Date: 05.10.2019
Modified: 05.10.2019
Category: Article
Status: draft
Tags: pelican, publishing
Slug: mosfet-heatsink
Authors: Andrey Albershtein
Summary: How to find a appropriate heatsink for MOSFET
lang: en

In this little note I will try structure information about thermal resistance
and how to find proper heatsink for transistor or diode. I will go a little bit
in details on what is thermal resistance and how it used in calculations. If you
find any mistakes or want to comment something please see end of the page.

#### Overview

TODO lifetime of MOSFET depending on temp https://en.wikipedia.org/wiki/Negative-bias_temperature_instability

Why to even have heatsink? There is a few reasons for that. First of all high
temperature of the component can damage the circuit and device itself; Imagen
200 C MOSFET sitting on your PCB. Secondly, too high working temperature of the
component dramatically decrease its live and assures that it won't be reliable
[\[6\]][6]. 

#### Before Starting - Requirements

Let's decide what is working condition of our component. I will be looking at
the P-channel MOSFET transistor [AOD4185][5].

* What is the drain current $I_D$? In my application it is 5 A at peak and 1 - 3
  A on average.
* What is drain-source resistance? For AOD4185 it is TODO
* What is maximum ambient temperature in which device is suppose to operate?
  Let's take 25C (based on [\[1\]][1], [\[2\]][2] and [\[6\]][6] it is suitable
  value for the most cases). 
* What is maximum MOSFET's temperature? Datasheet says that maximum working
  temperature is 175C let's take about the middle 90C.

#### How and how much power does MOSFET dissipate?

bom bom electrons bom bom colision with other stuff bom bom heat

#### What is thermal resistance?

Thermal resistance show how big is temperature difference in two points for a
applied one Watt of applied power. Therefore, for given thermal resistance of 3
C/W the temperature will descrease for 3 C for every applied Watt.

<div class="centered-image margined">
    <img width="500px" src="../images/mosfet_handdrawn.svg">
</div>

So, the thermal resistance shows us how hard it is for energy to move
through the material. Material with really high resistance is a good insulator
and therefore is really bad for electronics as it will keep all the heat inside.

\begin{equation*}
\textrm{Thermal resistance} = \frac{\textrm{Thickness}}{\textrm{Thermal conductivity}}
\end{equation*}

**An example.** From the equation above we see that resistance decrease with
higher value of thermal conductivity. Let's pick two different materials which
are definitely differently conduct heat. From [this table][8] we find out that
thermal conductivity of glass and copper is $k_{glass} = 0.2$ and $k_{copper} =
400$ $[W\cdot m^{-1}K^{-1}]$ accordingly. For the same thickness of the material
the resistance will be $R_{glass} = 5$ and $R_{copper} = 0.0025\ [K/W]$.
Enormous difference as expected. Therefore, the lower thermal resistance the
faster energy gets from the hot point to the cool one.

#### How much heat is generated?

**Heat generated by transistor**. So, our junctions (PN-junction) carries some
current. The junction has some resistance. Due to this resistance part of the
current is converted into heat.  We would like to keep our junction calm and
cool to not melt everything around and we also would like it to stay in its
parameters range (e.g. resistance).

So, we would like to drain some heat from a junction to the
...heatsink/environment? But firstly this heat has to move to the case of the
transistor and then to to the heatsink or directly into environment.

We can start from calculation how much heat/power will be dissipated in our
junction. To do so we just calculate power over the Drain-Source junction of the
mosfet $P = I^2R = 0.5\ [W]$, where I is the main current flow through the
transistor. The R is resistance over the Drain-Source junction.

Dissipation also depends on how frequent you switch the MOSFET. But it plays
role only in case if your have medium or high frequency (values? nuh). 

**A little bit of math**. With the following equation we can calculate:
    * How much power transistor can handle
    * How hot will it be at certain power dissipation

Let's look at some example. Firstly, we need to choose maximum allowed
temperature of the transistor. It is defenitily shouldn't be higher than max
temperature from datasheet $T_{j max}$. I took 100C as it is still far away from
maximum and not so low as it will require much more sophisticated cooling. 
We also need to pick some initial ambient temperature - let it be 25C.

\begin{equation*}
T_j = P_d (R_{jc} + R_{ca}) + T_a,\textrm{ where }T_a = 25C,\ T_j = 100C
\end{equation*}

$R_{jc}$ and $R_{ja}$ are thermal resistances from datasheet. jc means
junction-to-case and ja means junction-to-ambient. The former tells as what is
the thermal resistance of the transistor when energy is moves from junction to
case and the latter is from junction to ambient accordingly.

\begin{equation}
R_{ca} + R_{js} = \frac{T_j - T_a}{P_d}
\end{equation}

**Real case calculations**. From datasheet we can find out that $R_{jc} = 2\
C/W$ and $R_{ja} = 50\ C/W$. As you can see by default, without heatsink, the
temperature rise of the transistor will be 50 C per Watt. That can be suitable
if you switching small loads. But if it is too much we need to calculate what
thermal resistance should be to suite our conditions. As we can't cool
transistor from inside we will need to cool the case. Therefore, we need to find
Rca. From the equation above we can derive that:

\begin{equation*}
R_{ca} = \frac{T_j - T_a}{P_d} - R_{js} = \frac{90 - 25}{5^2\cdot0.04} - 2 = 73\ C/W
\end{equation*}

In this case we don't need heatsink as thermal resistance from junction to
ambient is 50 C/W ($R_{ja}$ from datasheet). This means that TODO

Let's look at what happens if TODO in 20 A:

\begin{equation*}
R_{ca} = \frac{T_j - T_a}{P_d} - R_{js} = \frac{90 - 25}{20^2\cdot0.04} - 2 = 2.68\ C/W
\end{equation*}

1. t_mosfet - t_ambient = 75 - 60 = 15
    This is maximum temperature increase of the transistor from heatsink.
2. Look into graph I_D from V_DS for your V_GS
3. Look into graph 4 find R increase
4. calculate v_gs increase
5. MOSFET will dissipate P = V_DS * I_D = I_D^2 * R_DS = 0.5 Watts
6. Do we need it?

#### Which heatsink to pick?

The nicest one =)

#### References:

* [StackExchange Question 1][1]
* [StackExchange Question 2][2]
* [Understanding Thermal Dissipation and Design of a Heatsink][3]
* [Heatsink Calculations][4]
* [AOD4185 Datasheet][5]
* [The Design of Heatsinks][6]
* [List of thermal conductivities][8]
* [Heatsink Calculator][9]

[1]: https://electronics.stackexchange.com/questions/39188/how-to-find-a-fitting-cooler-heatsink-for-a-mosfet
[2]: https://electronics.stackexchange.com/questions/272718/mosfet-how-to-determine-if-a-heatsink-is-required
[3]: http://www.ti.com/lit/an/slva462/slva462.pdf
[4]: https://www.re-innovation.co.uk/docs/heatsink-calculations/
[5]: https://datasheet.lcsc.com/szlcsc/Alpha-Omega-Semicon-AOS-AOD4185_C77993.pdf
[6]: https://sound-au.com/heatsinks.htm
[7]: 
[8]: https://en.wikipedia.org/wiki/List_of_thermal_conductivities
[9]: http://mustcalculate.com/electronics/heatsink.php
